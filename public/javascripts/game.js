// Generated by CoffeeScript 1.3.3
(function() {
  var drawBall, drawBoard, drawRacket, game, keyboardDown, keyboardUp, processInputs;

  this.canvas_width = 700;

  this.canvas_height = 400;

  this.height = 55;

  this.width = 10;

  this.key_left = 37;

  this.key_up = 38;

  this.key_right = 39;

  this.key_down = 40;

  this.up_pressed = false;

  this.down_pressed = false;

  this.my_y = 10;

  this.dy = 5;

  drawBoard = function(ctx) {
    processInputs();
    ctx.clearRect(0, 0, this.canvas_width, this.canvas_height);
    drawRacket(ctx, 10, this.my_y, "rgb(200,0,0)");
    drawRacket(ctx, 680, 10, "rgb(0,0,200)");
    return drawBall(ctx, 100, 100);
  };

  drawRacket = function(ctx, x, y, color) {
    ctx.fillStyle = color;
    return ctx.fillRect(x, y, this.width, this.height);
  };

  drawBall = function(ctx, x, y) {
    ctx.fillStyle = "rgb(100, 100, 0)";
    ctx.arc(x, y, 5, 0, Math.PI * 2, true);
    return ctx.fill();
  };

  keyboardDown = function(evt) {
    switch (evt.which) {
      case this.key_down:
        this.down_pressed = true;
        return this.up_pressed = false;
      case this.key_up:
        this.up_pressed = true;
        return this.down_pressed = false;
    }
  };

  keyboardUp = function(evt) {
    switch (evt.which) {
      case this.key_down:
        return this.down_pressed = false;
      case this.key_up:
        return this.up_pressed = false;
    }
  };

  processInputs = function() {
    if (this.up_pressed) {
      return this.my_y -= this.dy;
    } else if (this.down_pressed) {
      return this.my_y += this.dy;
    }
  };

  game = function() {
    var canvas, ctx;
    canvas = document.getElementById('game_board_canvas');
    ctx = canvas.getContext('2d');
    drawBoard(ctx);
    $(window).on('keydown', keyboardDown);
    $(window).on('keyup', keyboardUp);
    return setInterval((function() {
      return drawBoard(ctx);
    }), 20);
  };

  $(function() {
    return game();
  });

}).call(this);
